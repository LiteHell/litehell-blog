<!doctypehtml><link href=https://gravatar.com/avatar/837266b567b50fd59e72428220bf69b1 rel=icon><link href=https://blog.litehell.info/post/fcitx5_for_101_key_keyboard_kde_laptop rel=canonical><link title="RSS 2.0 Feed for blog.litehell.info"href=https://blog.litehell.info/feed/rss rel=alternate type=application/rss+xml><link title="Atom 1.0 Feed for blog.litehell.info"type="	application/atom+xml"href=https://blog.litehell.info/feed/atom rel=alternate><link title="Json 1.0 Feed for blog.litehell.info"href=https://blog.litehell.info/feed/json rel=alternate type=application/feed+json><link href=https://esm.sh/@wooorm/starry-night@3/style/both rel=stylesheet><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href=https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap rel=stylesheet><meta content="LiteHell의 블로그 - 한글 입력을 위한 fcitx5 설치"property=og:title><meta content="KDE 노트북에서의 버그없는 한글 입력을 위한 삽질기"property=og:description><meta content=ko_KR property=og:locale><meta content=blog property=og:type><meta content="LiteHell의 블로그"property=og:site_name><meta content=https://blog.litehell.info/post/fcitx5_for_101_key_keyboard_kde_laptop property=og:url><meta content=https://blog.litehell.info/kde_keyboard_settings.png property=og:image><meta content=width=device-width,initial-scale=1 name=viewport><style>html,body{margin:0;padding:0;font-family:Noto Sans KR,sans-serif}</style><title>LiteHell의 블로그 - 한글 입력을 위한 fcitx5 설치</title><body><link as=image href=https://gravatar.com/avatar/837266b567b50fd59e72428220bf69b1 rel=preload><link as=image href=https://i.creativecommons.org/l/by-sa/4.0/88x31.png rel=preload><link as=image href=https://www.gnu.org/graphics/agplv3-with-text-100x42.png rel=preload><style data-emotion="css 1nfpw07">.css-1nfpw07{--top-padding:max(40px,3rem);--vertical-padding:max(20px,2em);padding:var(--top-padding)var(--vertical-padding)0em var(--vertical-padding);box-sizing:border-box;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.css-1nfpw07>*{width:100%}@media (width>=1024px){.css-1nfpw07>*{max-width:960px}}.css-1nfpw07 main{-webkit-flex:1;-ms-flex:1;flex:1}.css-1nfpw07 footer{border-top:1px solid #727272;margin:2rem 0 0;padding:1.5rem 0}</style><div class=css-1nfpw07><style data-emotion="css 1choove">.css-1choove{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;align-items:center;gap:2rem;padding-bottom:1.5rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.css-1choove .profileImg a{color:inherit;-webkit-text-decoration:none;text-decoration:none}.css-1choove .profileImg img{border-radius:4rem;width:8rem;height:8rem;box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b}.css-1choove .title h1{margin:0 0 .5rem;padding:0;font-size:2rem;line-height:2.5rem}.css-1choove .title h1 a{color:inherit;-webkit-text-decoration:none;text-decoration:none}.css-1choove .links{margin:0;padding:0;font-size:.9rem;line-height:1.2rem}@media (width<=1023px){.css-1choove .title h1{font-size:1.5rem;line-height:2rem}.css-1choove .rounded img{border-radius:3.5rem 3.4rem;width:7rem;height:7rem}}</style><header class=css-1choove><div class=profileImg><a href=/><img alt="LiteHell의 Gravatar 아이콘"src=https://gravatar.com/avatar/837266b567b50fd59e72428220bf69b1></a></div><div class=title><h1><a href=/>LiteHell의 블로그</a></h1><p class=links>외부고리: <a href=https://github.com/litehell>GitHub</a>, <a href=https://yeonjin.name/portfolio>Portfolio</a><br>내부고리: <a href=/categories>카테고리</a>, <a href=/tags>태그</a></div></header><main><div><style data-emotion="css 1v4sk1e">.css-1v4sk1e{border-bottom:1px solid #999;margin-bottom:.8rem;padding:1.5rem 0 2rem}.css-1v4sk1e .title{margin-bottom:.25rem}.css-1v4sk1e .title *{margin:0;padding:0;display:inline}.css-1v4sk1e .title h2{font-size:2rem;line-height:2.1rem}.css-1v4sk1e .title h3{margin-left:1rem;font-size:1rem;font-weight:200;line-height:1rem}.css-1v4sk1e .datetime{color:#666;margin:0;padding:0}.css-1v4sk1e .links .description{color:#666}</style><div class=css-1v4sk1e><div class=title><h2>한글 입력을 위한 fcitx5 설치</h2><h3>KDE 노트북에서의 버그없는 한글 입력을 위한 삽질기</h3></div><p class=datetime>2023. 10. 17. 오후 12:34:16에 LiteHell이(가) 편집하고 2023. 10. 17. 오후 2:32:47에 수정함.<div class=links><div class=link><span class=description>카테고리: </span><a href=/category/Linux>Linux</a></div><div class=link><span class=description>테그: </span><a href=/tag/Linux>Linux</a>, <a href=/tag/Korean>Korean</a>, <a href=/tag/Hangul>Hangul</a>, <a href=/tag/IM>IM</a>, <a href=/tag/KDE>KDE</a></div></div></div><style data-emotion="css vj6hh8">.css-vj6hh8{padding:10px;font-size:1rem;line-height:180%}.css-vj6hh8 pre{overflow-x:auto}.css-vj6hh8 h1{margin:1.8rem 0;font-size:1.8rem}.css-vj6hh8 h1:before{content:"# ";color:#a19c91}.css-vj6hh8 h2{margin:1.6rem 0;font-size:1.6rem}.css-vj6hh8 h2:before{content:"## ";color:#a19c91}.css-vj6hh8 h3{margin:1.4rem 0;font-size:1.4rem}.css-vj6hh8 h3:before{content:"### ";color:#a19c91}.css-vj6hh8 h4{margin:1.2rem 0;font-size:1.2rem}.css-vj6hh8 h5{margin:1.15rem 0;font-size:1.15rem}.css-vj6hh8 h5:before{content:"> ";color:#a19c91}.css-vj6hh8 h6{margin:1.1rem 0;font-size:1.1rem}.css-vj6hh8 h6:before{content:">> ";color:#a19c91}.css-vj6hh8 img,.css-vj6hh8 iframe{max-width:80%;margin:0 auto;display:block}.css-vj6hh8 table{white-space:nowrap;border-collapse:collapse;display:block;overflow-x:auto}.css-vj6hh8 table td,.css-vj6hh8 table tr,.css-vj6hh8 table th{border:1px solid gray}.css-vj6hh8 table th{font-weight:700}.css-vj6hh8 table th,.css-vj6hh8 table td{padding:5px 10px}.css-vj6hh8 table thead{background:#d8d8d8}.css-vj6hh8 blockquote{background:#c2c2c2;border-left:5px solid #4e4e4e;margin:25px 10px 25px 30px;padding:10px 50px}.css-vj6hh8 ul li,.css-vj6hh8 ol li{margin:6px 0}</style><article class=css-vj6hh8><h1>서론</h1><p>필자는 초창기에 <a href=https://github.com/ibus/ibus>ibus</a>를 썼었다. ibus는 웬만한 프로그램에서 아무 버그없이 잘 작동한다. 딱 한가지, 리브레오피스에서 공백 입력이 안 된다는 치명적인 버그만 빼면 말이다.<p>그래서 ibus 다음으로 <a href=https://github.com/hamonikr/nimf>하모니카에서 유지보수하는 nimf</a>를 썼었다. nimf는 리브레오피스에서의 치명적인 버그는 없었지만, 엔터키를 누르면 텍스트가 사라지는 버그가 있었다. 근데 이 버그, 처음에만 짜증나지 좀 지나면 적응된다. 그래서 적응해서 쓰다가 생각해보니 '이건 좀 아닌 것 같다'싶어서 다른 입력기를 설치했다.<p>본 블로그 글은 <a href=https://archlinux.org/>Arch Linux</a>를 기준으로 설명한다.<h2>KDE에서의 키보드 레이아웃</h2><p>입력기를 바꾸기 위해 삽질하는 과정에서 한글키가 오른쪽 Alt키로 인식되는 현상을 확인했다. 분명히 아치 리눅스 설치 초기에 매핑을 했었는데, 시스템 업데이트를 하는 과정에서 원상복구가 된 것 같다. 그래서 이번에는 KDE 설정 프로그램을 이용해 한글키와 한자키를 매핑했다.<p><img alt="KDE 키보드 설정 프로그램"src=./kde_keyboard_settings.png><p>위와 같이 시스템 설정 프로그램의 <strong>입력 장치 🠞 키보드</strong> 화면에서 <strong>오른쪽 Alt 키를 한/영 키로 만들기</strong>, <strong>오른쪽 Ctrl 키를 한자 키로 만들기</strong> 항목을 체크하면 된다. (키보드 레이아웃에 따라 약간 다를 수 있다.) 노트북 등의 101/104키 호환 레이아웃이라면 위 과정을 반드시 거쳐야 한다.<h3>한/영, 한자키 인식여부 확인방법</h3><p>본인 키보드가 101/104키인지 106키인지 헷갈린다면 <del>키보드 키 갯수 세지말고</del> 먼저 <code>xev</code> 프로그램을 설치한다.<pre><code class=language-bash>sudo pacman -S xorg-xev
</code></pre><p>그리고 콘솔 창에서 xev 프로그램을 실행한다.<pre><code class=language-bash>xev
</code></pre><p>xev 프로그램 창을 활성화하고 한글키랑 한자키를 눌러본다. 다음과 같이 콘솔 창에 <em>Hangul</em>이나 <em>Hangul_Hanja</em>키가 인식된 메세지가 출력되면 한/영 키, 한자 키가 정상적으로 인식되는 것이다.<pre><code>KeyRelease event, serial 39, synthetic NO, window 0x9000001,
    root 0x79b, subw 0x0, time 1234567, (-10, 10), root:(10, 10),
    state 0x0, keycode 108 (keysym 0xff31, Hangul), same_screen YES,
</code></pre><pre><code>KeyPress event, serial 39, synthetic NO, window 0x9000001,
    root 0x79b, subw 0x0, time 1234567, (10, 10), root:(10, 10),
    state 0x0, keycode 105 (keysym 0xff34, Hangul_Hanja), same_screen YES,
</code></pre><p>만약 위와 같은 메세지가 안 뜨고 Alt_R이나 Control_R이 인식된다면 <a href=#kde에서의-키보드-레이아웃>위에 써진 내용</a>에 따라 매핑하면 된다.<h2>fcitx5 설치 방법</h2><p>먼저, 다음 명령어를 실행해 fcitx5를 설치한다.<pre><code class=language-bash>sudo pacman -S fcitx5-im fcitx-hangul
</code></pre><p><code>/etc/environment</code> 파일에 다음 내용을 추가한다. 입력기로 fcitx를 쓰도록 지정하는 작업이다.<pre><code class=language-ini><span class=pl-k>GTK_IM_MODULE</span>=fcitx
<span class=pl-k>QT_IM_MODULE</span>=fcitx
<span class=pl-k>QT4_IM_MODULE</span>=fcitx
<span class=pl-k>QT5_IM_MODULE</span>=fcitx
<span class=pl-k>XMODIFIERS</span>=@<span class=pl-k>im</span>=fcitx
</code></pre><p>그 다음에 <code>~/.xprofile</code> 파일에 다음 내용을 추가한다. 부팅시에 fcitx5가 실행되도록 한다.<pre><code class=language-bash>fcitx5 -d
</code></pre><p>재부팅하고 <code>env | grep fcitx</code> 명령어를 실행해 환경변수가 제대로 변경됐는지 확인해보자. 제대로 변경됐다면 다음과 같이 뜰 것이다.<pre><code class=language-bash>GTK_IM_MODULE=fcitx
QT4_IM_MODULE=fcitx
XMODIFIERS=@im=fcitx
QT5_IM_MODULE=fcitx
QT_IM_MODULE=fcitx
</code></pre><p>만약 환경변수가 제대로 변경되지 않았다면 <code>~/.xprofile</code> 파일에서 <code>fcitx5 -d</code> 위에 다음 내용을 추가하고 재부팅한다. 그러면 환경변수가 정상적으로 변경될 것이다.<pre><code class=language-bash><span class=pl-k>export</span> <span class=pl-s><span class=pl-pds>$(</span>/usr/lib/systemd/user-environment-generators/30-systemd-environment-d-generator<span class=pl-pds>)</span></span>
</code></pre><h2>fcitx5 설정</h2><p><code>fcitx5-configtool</code> 명령어를 실행하면 다음 창이 뜬다. <img alt="fcitx5 KDE 설정 창"src=./fcitx5_settings_first_screen.png><p>위 화면에서 한국어가 안 보이면 <strong>입력기 추가</strong>버튼을 눌러서 추가한다. (입력기 추가 화면에서 한국어가 안 보이면 <strong>현재 언어만 표시</strong> 옵션을 해제하면 된다.)<p>밑에서 <strong>전역 옵션 구성하기...</strong> 버튼을 누르면 다음 화면이 뜬다.<p><img alt="fcitx5 KDE 설정 창"src=./fcitx5_global_settings.png><p><strong>Trigger Input Method</strong>가 한/영을 전환하는 단축키 설정이다. 오른쪽의 <strong>+</strong> 버튼을 눌러 한글 키를 추가하면 된다.<p>fcitx5는 기본적으로 한/영을 전환할때 작은 툴팁을 표시한다. 거슬리면 위 화면에서 <strong>Show Input Method Information when switch input method</strong>를 체크 해제하면 된다.<p>이제 한글 입력을 버그없이 잘 할 수 있게 됐다. 끝!</article><style data-emotion="css 1ko3mci">.css-1ko3mci{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;justify-content:space-between;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.css-1ko3mci a{-webkit-text-decoration:none;text-decoration:none}.css-1ko3mci .inner{vertical-align:top;display:inline-block}.css-1ko3mci .inner .title{font-size:1.3em}.css-1ko3mci .inner .subtitle{font-weight:200}.css-1ko3mci .inner .date{font-size:.8em;font-weight:200}.css-1ko3mci .next:after{content:" ❯";font-size:1.25em}.css-1ko3mci .previous:before{content:"❮ ";font-size:1.25em}</style><nav class=css-1ko3mci><a class=previous href=/post/docker_for_testing><div class=inner><div class=title>Docker로 테스트하기</div><div class=subtitle>Docker로 빌드만 하지 말고 테스트도 하자</div><div class=date>2023. 10. 25. 오후 2:49:49</div></div></a><a class=next href=/post/webpack_and_react_ssg_3><div class=inner><div class=title>Webpack과 React를 이용한 정적 웹사이트 만들기 (3)</div><div class=subtitle>... + MiniCssExtractPlugin = TA-DA!</div><div class=date>2023. 7. 23. 오후 5:25:47</div></div></a></nav></div></main><style data-emotion="css 19fp2wc">.css-19fp2wc{font-size:.75rem;line-height:.9rem}.css-19fp2wc p{margin:0 0 1em;padding:0}.css-19fp2wc .badges{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;gap:1em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.css-19fp2wc .badges img{border-width:0;width:auto;height:3em}</style><footer class=css-19fp2wc><p>Copyright (C) 2020 ~ 2025 Yeonjin Shin (a.k.a. LiteHell), All rights reserved.<br><a href=/license>This blog is free software; For source code and more informations on license and copyrights, Click here.</a><p>Feeds: <a href=/feed/rss>RSS 2.0</a>, <a href=/feed/atom>Atom</a>, <a href=/feed/json>JSON</a><div class=badges><a href=http://creativecommons.org/licenses/by-sa/4.0/ rel=license><img alt="Creative Commons License"src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png><a href=https://www.gnu.org/licenses/agpl-3.0.en.html><img alt="GNU Affero General License Version 3"src=https://www.gnu.org/graphics/agplv3-with-text-100x42.png></a></a></div></footer></div>