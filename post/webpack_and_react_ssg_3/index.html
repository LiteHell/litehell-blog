<!doctypehtml><link href=https://gravatar.com/avatar/837266b567b50fd59e72428220bf69b1 rel=icon><link href=https://blog.litehell.info/post/webpack_and_react_ssg_3 rel=canonical><link title="RSS 2.0 Feed for blog.litehell.info"href=https://blog.litehell.info/feed/rss rel=alternate type=application/rss+xml><link title="Atom 1.0 Feed for blog.litehell.info"type="	application/atom+xml"href=https://blog.litehell.info/feed/atom rel=alternate><link title="Json 1.0 Feed for blog.litehell.info"href=https://blog.litehell.info/feed/json rel=alternate type=application/feed+json><link href=https://esm.sh/@wooorm/starry-night@3/style/both rel=stylesheet><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href=https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap rel=stylesheet><meta content="LiteHell의 블로그 - Webpack과 React를 이용한 정적 웹사이트 만들기 (3)"property=og:title><meta content="... + MiniCssExtractPlugin = TA-DA!"property=og:description><meta content=ko_KR property=og:locale><meta content=blog property=og:type><meta content="LiteHell의 블로그"property=og:site_name><meta content=https://blog.litehell.info/post/webpack_and_react_ssg_3 property=og:url><meta content=https://gravatar.com/avatar/837266b567b50fd59e72428220bf69b1 property=og:image><meta content=width=device-width,initial-scale=1 name=viewport><style>html,body{margin:0;padding:0;font-family:Noto Sans KR,sans-serif}</style><title>LiteHell의 블로그 - Webpack과 React를 이용한 정적 웹사이트 만들기 (3)</title><body><link as=image href=https://gravatar.com/avatar/837266b567b50fd59e72428220bf69b1 rel=preload><link as=image href=https://i.creativecommons.org/l/by-sa/4.0/88x31.png rel=preload><link as=image href=https://www.gnu.org/graphics/agplv3-with-text-100x42.png rel=preload><style data-emotion="css 1nfpw07">.css-1nfpw07{--top-padding:max(40px,3rem);--vertical-padding:max(20px,2em);padding:var(--top-padding)var(--vertical-padding)0em var(--vertical-padding);box-sizing:border-box;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.css-1nfpw07>*{width:100%}@media (width>=1024px){.css-1nfpw07>*{max-width:960px}}.css-1nfpw07 main{-webkit-flex:1;-ms-flex:1;flex:1}.css-1nfpw07 footer{border-top:1px solid #727272;margin:2rem 0 0;padding:1.5rem 0}</style><div class=css-1nfpw07><style data-emotion="css 1choove">.css-1choove{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;align-items:center;gap:2rem;padding-bottom:1.5rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.css-1choove .profileImg a{color:inherit;-webkit-text-decoration:none;text-decoration:none}.css-1choove .profileImg img{border-radius:4rem;width:8rem;height:8rem;box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b}.css-1choove .title h1{margin:0 0 .5rem;padding:0;font-size:2rem;line-height:2.5rem}.css-1choove .title h1 a{color:inherit;-webkit-text-decoration:none;text-decoration:none}.css-1choove .links{margin:0;padding:0;font-size:.9rem;line-height:1.2rem}@media (width<=1023px){.css-1choove .title h1{font-size:1.5rem;line-height:2rem}.css-1choove .rounded img{border-radius:3.5rem 3.4rem;width:7rem;height:7rem}}</style><header class=css-1choove><div class=profileImg><a href=/><img alt="LiteHell의 Gravatar 아이콘"src=https://gravatar.com/avatar/837266b567b50fd59e72428220bf69b1></a></div><div class=title><h1><a href=/>LiteHell의 블로그</a></h1><p class=links>외부고리: <a href=https://github.com/litehell>GitHub</a>, <a href=https://yeonjin.name/portfolio>Portfolio</a><br>내부고리: <a href=/categories>카테고리</a>, <a href=/tags>태그</a></div></header><main><div><style data-emotion="css 1v4sk1e">.css-1v4sk1e{border-bottom:1px solid #999;margin-bottom:.8rem;padding:1.5rem 0 2rem}.css-1v4sk1e .title{margin-bottom:.25rem}.css-1v4sk1e .title *{margin:0;padding:0;display:inline}.css-1v4sk1e .title h2{font-size:2rem;line-height:2.1rem}.css-1v4sk1e .title h3{margin-left:1rem;font-size:1rem;font-weight:200;line-height:1rem}.css-1v4sk1e .datetime{color:#666;margin:0;padding:0}.css-1v4sk1e .links .description{color:#666}</style><div class=css-1v4sk1e><div class=title><h2>Webpack과 React를 이용한 정적 웹사이트 만들기 (3)</h2><h3>... + MiniCssExtractPlugin = TA-DA!</h3></div><p class=datetime>2023. 7. 23. 오후 5:25:47에 LiteHell이(가) 편집함.<div class=links><div class=link><span class=description>카테고리: </span><a href=/category/Dev>Dev</a></div><div class=link><span class=description>테그: </span><a href=/tag/React>React</a></div></div></div><style data-emotion="css 1wotv8h">.css-1wotv8h{background:#ddd;border:1px solid #666;border-radius:4px;padding:1em}.css-1wotv8h .title,.css-1wotv8h .active{font-weight:600}.css-1wotv8h ul{margin:1em 0 0}</style><nav class=css-1wotv8h><div class=title>(시리즈) Webpack과 React를 이용한 정적 웹사이트 만들기</div><ul><li><a class=active href=/post/webpack_and_react_ssg_3>Webpack과 React를 이용한 정적 웹사이트 만들기 (3)</a><li><a href=/post/webpack_and_react_ssg_2>Webpack과 React를 이용한 정적 웹사이트 만들기 (2)</a><li><a href=/post/webpack_and_react_ssg_1>Webpack과 React를 이용한 정적 웹사이트 만들기 (1)</a></ul></nav><style data-emotion="css vj6hh8">.css-vj6hh8{padding:10px;font-size:1rem;line-height:180%}.css-vj6hh8 pre{overflow-x:auto}.css-vj6hh8 h1{margin:1.8rem 0;font-size:1.8rem}.css-vj6hh8 h1:before{content:"# ";color:#a19c91}.css-vj6hh8 h2{margin:1.6rem 0;font-size:1.6rem}.css-vj6hh8 h2:before{content:"## ";color:#a19c91}.css-vj6hh8 h3{margin:1.4rem 0;font-size:1.4rem}.css-vj6hh8 h3:before{content:"### ";color:#a19c91}.css-vj6hh8 h4{margin:1.2rem 0;font-size:1.2rem}.css-vj6hh8 h5{margin:1.15rem 0;font-size:1.15rem}.css-vj6hh8 h5:before{content:"> ";color:#a19c91}.css-vj6hh8 h6{margin:1.1rem 0;font-size:1.1rem}.css-vj6hh8 h6:before{content:">> ";color:#a19c91}.css-vj6hh8 img,.css-vj6hh8 iframe{max-width:80%;margin:0 auto;display:block}.css-vj6hh8 table{white-space:nowrap;border-collapse:collapse;display:block;overflow-x:auto}.css-vj6hh8 table td,.css-vj6hh8 table tr,.css-vj6hh8 table th{border:1px solid gray}.css-vj6hh8 table th{font-weight:700}.css-vj6hh8 table th,.css-vj6hh8 table td{padding:5px 10px}.css-vj6hh8 table thead{background:#d8d8d8}.css-vj6hh8 blockquote{background:#c2c2c2;border-left:5px solid #4e4e4e;margin:25px 10px 25px 30px;padding:10px 50px}.css-vj6hh8 ul li,.css-vj6hh8 ol li{margin:6px 0}</style><article class=css-vj6hh8><p>전 글까지 <a href=https://webpack.js.org/loaders/style-loader/>style-loader</a>를 썼다. style-loader는 style 태그를 동적으로 생성하여 CSS를 DOM 안에 주입하는 로더이다. 즉, style-loader를 쓰면 js 스크립트가 실행되면서 style 태그가 동적으로 생성되고, 그 태그 내에 css가 동적으로 삽입되면서 스타일이 적용된다.<p>하지만 정적 페이지로 빌드후 속도가 느린 서버로 게시하거나 스크립트 용량이 비대하면, 스크립트가 완전히 다 실행되기 전까지의 찰나동안 스타일이 적용되지 않은 깨진 페이지가 나타난다. 이런 버그를 막기 위해서는 <a href=https://webpack.js.org/plugins/mini-css-extract-plugin/>MiniCssExtractPlugin</a>을 이용하면 된다.<p>MiniCssExtractPlugin은 CSS를 스크립트를 통해 DOM에 주입하지 않고 별도의 CSS 파일에 저장한 뒤, 빌드시에 해당 CSS 파일을 삽입하는 link 태그를 HTML에 삽입한다. 즉 동적으로 CSS를 주입하지 않는다. 따라서 이를 이용하면 스크립트가 완전히 다 실행되기 전까지 페이지 스타일이 적용되지 않는 현상을 해결할 수 있다.<p>MiniCssExtractPlugin을 이용하기 위해서는 먼저 해당 패키지를 설치해야 한다. 다음 명령어로 해당 패키지를 설치한다.<pre><code class=language-bash>yarn add --dev mini-css-extract-plugin
</code></pre><p>그 다음 <code>webpack.config.js</code> 파일에서 다음 부분을 다음과 같이 수정한다.<pre><code class=language-js><span class=pl-c>// 수정 전</span>
module<span class=pl-k>:</span> {
        <span class=pl-k>...</span><span class=pl-smi>commons</span>.<span class=pl-smi>module</span>,
        rules<span class=pl-k>:</span> [
            <span class=pl-k>...</span><span class=pl-smi>commons</span>.<span class=pl-smi>module</span>.<span class=pl-c1>rules</span>,
            <span class=pl-c>// CSS를 빌드시 로드하도록 하면 오류가 발생한다. (Node.js 환경은 웹브라우저가 아니므로 스타일 주입 시도가 당연히 실패하기 때문이다.)</span>
            <span class=pl-c>// 따라서 css파일은 웹브라우저단에서 로드되는 번들 스크립트에서만 주입되도록 </span>
            <span class=pl-c>// src/index.tsx Webpack 설정에만 추가한다.</span>
            {
                test<span class=pl-k>:</span> <span class=pl-k>/</span>\.<span class=pl-smi>css$</span><span class=pl-k>/</span>,
                use<span class=pl-k>:</span> [<span class=pl-s><span class=pl-pds>'</span>style-loader<span class=pl-pds>'</span></span>, <span class=pl-s><span class=pl-pds>'</span>css-loader<span class=pl-pds>'</span></span>, <span class=pl-s><span class=pl-pds>'</span>postcss-loader<span class=pl-pds>'</span></span>]
            },
        ]
    },
    plugins<span class=pl-k>:</span> [
        <span class=pl-k>...</span><span class=pl-smi>commons</span>.<span class=pl-c1>plugins</span>,
        <span class=pl-k>new</span> <span class=pl-en>HtmlWebpackPlugin</span>({
        filename<span class=pl-k>:</span> <span class=pl-s><span class=pl-pds>'</span>index.html<span class=pl-pds>'</span></span>,
        <span class=pl-c>// template 속성을 추가한다.</span>
        template<span class=pl-k>:</span> <span class=pl-s><span class=pl-pds>'</span>./src/index.html<span class=pl-pds>'</span></span>
    })],
</code></pre><pre><code class=language-js><span class=pl-c>// 수정 후</span>
module<span class=pl-k>:</span> {
        <span class=pl-k>...</span><span class=pl-smi>commons</span>.<span class=pl-smi>module</span>,
        rules<span class=pl-k>:</span> [
            <span class=pl-k>...</span><span class=pl-smi>commons</span>.<span class=pl-smi>module</span>.<span class=pl-c1>rules</span>,
            <span class=pl-c>// CSS를 빌드시 로드하도록 하면 오류가 발생한다. (Node.js 환경은 웹브라우저가 아니므로 스타일 주입 시도가 당연히 실패하기 때문이다.)</span>
            <span class=pl-c>// 따라서 css파일은 웹브라우저단에서 로드되는 번들 스크립트에서만 주입되도록 </span>
            <span class=pl-c>// src/index.tsx Webpack 설정에만 추가한다.</span>
            <span class=pl-c>// 그리고 프로덕션 빌드시에는 MiniCssExtractPlugin을 이용하여 js가 다 로드되기 전에는</span>
            <span class=pl-c>// 스타일이 적용되지 않는 버그를 해결한다.</span>
            {
                test<span class=pl-k>:</span> <span class=pl-k>/</span>\.<span class=pl-smi>css$</span><span class=pl-k>/</span>,
                use<span class=pl-k>:</span> [dev <span class=pl-k>?</span> <span class=pl-s><span class=pl-pds>'</span>style-loader<span class=pl-pds>'</span></span> <span class=pl-k>:</span> <span class=pl-smi>MiniCssExtractPlugin</span>.<span class=pl-smi>loader</span>, <span class=pl-s><span class=pl-pds>'</span>css-loader<span class=pl-pds>'</span></span>, <span class=pl-s><span class=pl-pds>'</span>postcss-loader<span class=pl-pds>'</span></span>]
            },
        ]
    },
    plugins<span class=pl-k>:</span> [
        <span class=pl-k>...</span><span class=pl-smi>commons</span>.<span class=pl-c1>plugins</span>,
        <span class=pl-k>new</span> <span class=pl-en>MiniCssExtractPlugin</span>(),
        <span class=pl-k>new</span> <span class=pl-en>HtmlWebpackPlugin</span>({
        filename<span class=pl-k>:</span> <span class=pl-s><span class=pl-pds>'</span>index.html<span class=pl-pds>'</span></span>,
        <span class=pl-c>// template 속성을 추가한다.</span>
        template<span class=pl-k>:</span> <span class=pl-s><span class=pl-pds>'</span>./src/index.html<span class=pl-pds>'</span></span>
    })],
</code></pre><p>위와 같이 수정한 후 정적 웹페이지를 빌드하면 이제 스크립트가 불러와지는동안 스타일이 적용되지 않는 문제가 해결된다.</article><style data-emotion="css 1ko3mci">.css-1ko3mci{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;justify-content:space-between;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.css-1ko3mci a{-webkit-text-decoration:none;text-decoration:none}.css-1ko3mci .inner{vertical-align:top;display:inline-block}.css-1ko3mci .inner .title{font-size:1.3em}.css-1ko3mci .inner .subtitle{font-weight:200}.css-1ko3mci .inner .date{font-size:.8em;font-weight:200}.css-1ko3mci .next:after{content:" ❯";font-size:1.25em}.css-1ko3mci .previous:before{content:"❮ ";font-size:1.25em}</style><nav class=css-1ko3mci><a class=previous href=/post/fcitx5_for_101_key_keyboard_kde_laptop><div class=inner><div class=title>한글 입력을 위한 fcitx5 설치</div><div class=subtitle>KDE 노트북에서의 버그없는 한글 입력을 위한 삽질기</div><div class=date>2023. 10. 17. 오후 12:34:16</div></div></a><a class=next href=/post/creating_mastodon_instance><div class=inner><div class=title>Mastodon 서버 구축하기</div><div class=subtitle>6$짜리 VPS와 CloudFlare를 이용한 인스턴스 구축</div><div class=date>2023. 7. 22. 오후 3:55:38</div></div></a></nav></div></main><style data-emotion="css 19fp2wc">.css-19fp2wc{font-size:.75rem;line-height:.9rem}.css-19fp2wc p{margin:0 0 1em;padding:0}.css-19fp2wc .badges{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;gap:1em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.css-19fp2wc .badges img{border-width:0;width:auto;height:3em}</style><footer class=css-19fp2wc><p>Copyright (C) 2020 ~ 2025 Yeonjin Shin (a.k.a. LiteHell), All rights reserved.<br><a href=/license>This blog is free software; For source code and more informations on license and copyrights, Click here.</a><p>Feeds: <a href=/feed/rss>RSS 2.0</a>, <a href=/feed/atom>Atom</a>, <a href=/feed/json>JSON</a><div class=badges><a href=http://creativecommons.org/licenses/by-sa/4.0/ rel=license><img alt="Creative Commons License"src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png><a href=https://www.gnu.org/licenses/agpl-3.0.en.html><img alt="GNU Affero General License Version 3"src=https://www.gnu.org/graphics/agplv3-with-text-100x42.png></a></a></div></footer></div>