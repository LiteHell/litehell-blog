{"pageProps":{"article":{"metadata":{"title":"학사일정 ICS 서비스 개발기 (下)","subtitle":"Go와 함께 서버리스로","author":"LiteHell","date":"2025-01-29T07:54:49.043Z","category":"Dev","series":"puang_network"},"rendered":"<h1 id=\"서론\">서론</h1>\n<p>학사일정/RSS/시간표 미리보기 서비스의 공통점은 크롤링 서비스이다. 학사일정 서비스의 특정을 요약하면 다음과 같다.</p>\n<ul>\n<li><a href=\"https://calendar.puang.network\">학사일정 서비스</a><ul>\n<li>주기적으로 학사일정을 크롤링해 데이터베이스에 저장한다.</li>\n<li>요청이 들어오면 백엔드에서 데이터베이스 조회결과를 iCalendar 형식으로 변환한다.<ul>\n<li><code>from</code> 매개변수와 <code>to</code> 매개변수를 지원해야 하므로 백엔드가 불가피하다. (예시: <code>/cau.ics?from=2019</code>)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>다른 서비스의 특징은 다음과 같다.</p>\n<ul>\n<li><a href=\"https://pre-timetable.puang.network\">강의시간표 미리보기 서비스</a><ul>\n<li>주기적으로 강의시간표 데이터를 크롤링해 정적 json 파일로 저장한다.</li>\n<li>프론트엔드에서 json 파일을 읽어서 서비스를 제공하다. (즉 크롤링 스크립트 외에는 백엔드가 없다)</li>\n</ul>\n</li>\n<li><a href=\"https://rss.puang.network\">중앙대학교 RSS 서비스</a><ul>\n<li>주기적으로 학교 공지사항을 크롤링해 정적 rss/atom/jsonFeed 파일로 저장한다.</li>\n<li>프론트엔드는 아무것도 하는 게 없다.</li>\n</ul>\n</li>\n</ul>\n<p>이 글의 시점은 2024년 초이다.</p>\n<h1 id=\"aws-lambda를-이용한-서버리스-전환\">AWS Lambda를 이용한 서버리스 전환</h1>\n<p>그렇다면 크롤링 부분만 AWS Lambda 함수로 분리하면 매우 단순한 구조의 서비스이지 않은가?\n따라서 다음과 같이 중앙대학교 학사일정 서비스를 재구성했다.</p>\n<p><img src=\"/img/caucalendar/caucalendar_serverless.png\" alt=\"calendar.puang.network의 서비리스 구조도\"></p>\n<p>다른 서비스는 백엔드 자체가 필요없으므로 더 단순하다. 강의시간표 미리보기 서비스와 중앙대학교 RSS 서비스의 서버리스 구조도는 다음과 같다.</p>\n<p><img src=\"/img/caucalendar/others_serverless.png\" alt=\"pre-timetable.puang.network와 rss.puang.network의 서버리스 구조도\"></p>\n<h2 id=\"과정\">과정</h2>\n<p>원래 스크린샷 하나하나 찍어가며 상사하게 쓸 생각이었는데 귀찮아진 관계로 대충 글로 정리한다.</p>\n<ol>\n<li>S3 버킷을 만든다.</li>\n<li>정적 호스팅을 활성화한다.<ul>\n<li>권한을 적절히 설정하여 웹 브라우저로 접속할 때 문제가 없도록 한다.</li>\n</ul>\n</li>\n<li>람다 함수를 만든다.</li>\n<li>람다 함수에 권한을 설정한다. (서비스계정 같은 거 만들 필요가 없다. 람다 함수에 권한 부여하면 AWS SDK가 알아서 인식한다.)</li>\n<li>리다이렉션이 필요하다면 S3 버킷에 리다이렉션 규칙을 설정한다.<ul>\n<li>람다 함수로의 리다이렉션이 필요한 거라면 람다 함수에 HTML URL을 만들어서 그 URL로 리다이렉션한다. 더 좋은 방법이 있을 수도 있긴 한데 이 정도로 단순한 서비스에선 대충 이렇게만 해도 충분하다.</li>\n</ul>\n</li>\n<li>Scheduler를 만든다.</li>\n</ol>\n<p>참 쉽죠?</p>\n<h1 id=\"결론\">결론</h1>\n<p>위와 같이 서버리스 서비스를 구축하여 월1000~1500원 정도의 비용으로 서비스를 운영하고 있다.</p>\n<p>원래 글을 작년에 쓸 계획이었는데 미루고 미루다보니 1년이 지났다... 이제 글도 썼으니 동아리나 다른 후배에게 서비스를 인수인계할 계획이다.</p>\n"},"articleId":"caucalendar_in_serverless","series":[{"title":"학사일정 ICS 서비스 개발기 (上)","articleId":"caucalendar_1"},{"title":"학사일정 ICS 서비스 개발기 (下)","articleId":"caucalendar_in_serverless"}],"seriesName":"학사일정/RSS/시간표 미리보기 서비스 개발기","previousPost":{"name":"retrospective_of_2024","metadata":{"title":"2024년의 회고","subtitle":"졸업과 취업","author":"LiteHell","date":"2024-12-27T10:41:06.311Z","category":"Life","tags":["Retrospective"],"last_modified_at":"2024-12-27T12:51:03.058Z"},"rendered":"<h1 id=\"들어가는-글\">들어가는 글</h1>\n<p>올해는 뭔가 많은 일이 있었다.... 되게 바빴지만 동시에 많은 것들을 이루어낸 해이기도 했다. 회고를 쓰면서 지난날들을 되돌아보려 한다.</p>\n<h2 id=\"하반기\">하반기</h2>\n<p>하반기에는 인턴십을 하고 학업을 마무리했다.</p>\n<h3 id=\"하계방학-인턴십\">하계방학 인턴십</h3>\n<p><a href=\"https://iacf.cau.ac.kr/\">중앙대학교 현장실습지원센터</a>를 통해 여러 인턴십에 지원했다. LG CNS 채용 연계형 인턴십과 카카오 채용 연계형 겨울 인턴십, 그리고 <a href=\"http://www.shuru.co.kr\">주식회사 슈르</a>의 산학연계 인턴십에 지원했다.</p>\n<p>LG CNS 채용 전형은 서류, 코딩테스트, 2:2 비대면 면접 순으로 진행됐고, 카카오 채용 전형은 서류, 코딩테스트, 3:1 대면 면접으로 진행됐다. 둘 다 면접까지는 갔으나 아쉽게도 불합격했다. LG CNS는 같이 면접 본 다른 지원자분께서 스펙이 너무나 뛰어났고, 카카오 인턴십은 면접이 서툴러서 잘못 본 것이 원인인 것 같다. 카카오는 대면면접을 볼 때 대기실이 따로 있고, 면접비로 50,000원 상당의 카카오페이포인트와 춘식이 핫팩을 주는 점이 좋았다.</p>\n<p>주식회사 슈르는 <a href=\"https://placement.cau.ac.kr\">중앙대학교 현장실습 통합관리 시스템</a>을 통해 지원했다. 전형은 서류, 1:1 비대면 면접 순으로 진행됐다. 면접은 웹과 관련된 기술면접으로만 이루어졌다. 회사가 가산디지털단지역에 있어서 학교 기숙사에서 출퇴근하기 매우 편했고, 사람들이 되게 좋았다. 출퇴근은 자유로운 편이었으며, 휴가 사용은 완전히 자유로웠다. 포괄임금제이지만, 초과근무시 그에 상응하는 보상휴가를 지급해준다.</p>\n<p>회사에서는 <a href=\"https://www.youtube.com/watch?v=6WZ5jjVXeF0\">고인물테스트</a>의 프론트엔드를 개발했다. 그때 회사에 나를 포함하여 인턴이 3명 있었는데, 내가 백엔드를 하면 다른 분께서 프론트 개발하는 데 우여곡절이 많을 것 같아서 그냥 내가 프론트엔드를 맡았다.</p>\n<p>처음 회사 직원분께서 사이트가 매우 간단할 것으로 예측하고 그냥 HTML + CSS + Javascript 조합으로 빠르게 만들자고 제안하셨다. 초반 기획서도 그렇게 거창하지 않았기에 알겠다고 하고 HTML + CSS + Javascript 조합으로 만들었다. 그러나 기획서가 가면 갈수록 수정되면서 복잡해졌고, 이에 나는 개발 편의성을 위해 Javascript 코드를 Typescript 코드로 재작성하고 Webpack을 이용한 빌드 시스템을 구축했다.</p>\n<p>가장 인상 깊었던 것은 좌우 무한 스크롤링을 구현하라는 요구사항이었다. 처음에는 웹브라우저에서 제공하는 스크롤바를 최대한 활용하려 했는데 사파리에서 자꾸만 버그가 나서 결국 그냥 바퀴를 재발명했다. 마우스랑 터치 이벤트를 받아 이동량을 계산하고 계산한 값에 따라 <code>requestAnimationFrame</code>으로 자식 요소의 위치를 이동시킴으로써 스크롤링을 직접 구현했다. 가장 하기 싫은 방법이었지만 결국 어쩔 수 없었다. 사소한 버그는 있었지만, 나름 그럴싸하게 동작했다. (이에 대해서는 추후 별도의 글로 쓸 예정)</p>\n<p>학교 프로젝트에서 디자이너나 기획자랑 협업할 일이 없었는데 회사에서 처음으로 기획자, 디자이너, 실무자와 같이 협업했다. 그 과정에서 슬랙이랑 노션도 적극적으로 써보고 스타트업이 어떻게 돌아가는지에 대해 많은 걸 배울 수 있어 좋은 경험이었다.</p>\n<h3 id=\"2024-1학기\">2024-1학기</h3>\n<h4 id=\"학교-수업\">학교 수업</h4>\n<p>2024-1학기에는 정보보호이론, 네트워크응용설계, 신호및시스템, 데이타베이스시스템, 캡스톤디자인(2)를 수강했다. 임베디드 관련 과목을 듣고 싶었는데 담당 교수님이 안식년인지라 어쩔 수 없이 신호및시스템을 대신 수강하게 됐다.</p>\n<p>정보보호이론은 DES, AES, RSA, ElGamel와 같은 암호에 관한 내용을 배웠다, 한 번 제대로 배워보고 싶었던 내용이라서 재밌었다. 네트워크응용설계는 네트워크 레이어 3~7을 Top-down으로 배운다. 데이타베이스시스템은 DB 시스템의 내부구조에 대해 가르친다. 신호및시스템은 푸리에 변환에 대해 맛보기로 가르쳐준다. 모두 다 좋은 내용이어서 만족스러웠다.</p>\n<h4 id=\"바이드럼캡스톤디자인\">바이드럼(캡스톤디자인)</h4>\n<p>중앙대학교는 캡스톤디자인을 2번 해야 한다. 2023-2학기에는 알고모여를 했었고 (<a href=\"/post/retrospective_of_2023\">관련 글</a>) 이제 2024-1학기에도 프로젝트를 해야 했다.</p>\n<p>팀 인원은 다행스럽게도 2023-2학기의 구성 그대로 가기로 결정돼서 주제만 빠르게 결정되면 됐다. 이때 리듬 게임을 만들 것을 다시 한번 더 제안했다. 말로만 제안하면 또 반대를 받을 게 예상돼서 이번에는 프로토타입을 미리 만들어 팀원들을 설득했다. 프로토타입에 관한 이야기는 <a href=\"/post/bidrum_and_janggu_controller_prototyping\">이 글</a>을 참고하라.</p>\n<p>주제부터 결과물까지 모든 것이 어그로였다. (중앙대에서 졸업작품으로 아케이드 리듬 게임을 하는 용자는 매우 드물다) 그래서 이왕 어그로 끄는 김에 최종 발표도 어그로로 하기로 했다. 한솜미술센터에서 <a href=\"https://thehansom.com/shop/item.php?it_id=1410694674\">사물놀이복</a>을 빌려서 최종 발표를 했다. 결과는 매우 성공적이었고 웃음을 참지 못하던 조교의 표정을 아직도 잊을 수가 없다.</p>\n<h2 id=\"상반기\">상반기</h2>\n<p>상반기에는 본격적인 사회인이 됐다.</p>\n<h3 id=\"첫-정규직-직장\">첫 정규직 직장</h3>\n<p>하계방학에 인턴십을 진행한 주식회사 슈르에 정규직으로 입사하게 됐다. 내가 학업에 열중하는 동안 회사는 여러 우여곡절을 겪으며 체계가 더 단단해졌다. 회사에서 개발하는 이커머스 서비스의 백오피스 프론트엔드 개발을 주로 맡았었다. 스타트업 기업에서 근무하면서 스타트업이 어떻게 돌아가는 지를 인턴으로 근무할 때보다 더 자세히 알 수 있었다. 다른 현직 개발자와 협업도 처음으로 해봤지만, 개인적으로 시간에 쫓겨 개발하느라 기술적인 성장을 많이 이루지 못한 것 같다. 그와는 별개로 Firebase를 본격적으로 처음 써봤는데 꽤 편리해서 좋았었다.</p>\n<p>되게 열심히 일했다. 학교로 졸업사진 찍으러 가다 회사에 큰 일 터져서 바로 헐레벌떡 회사로 달려가 고쳐도 보고... 여러 추억을 쌓았다.</p>\n<h3 id=\"이직\">이직</h3>\n<p>슈르를 다니다가 더 좋은 직장에서 더 높은 연봉의 오퍼를 받아 이직하게 됐다. 아직 모든 것이 낯설고 앞으로 내가 잘할 수 있는지 두렵지만 어찌 됐든 잘 적응해서 어서 빨리 성취를 이루고 싶다.</p>\n<h3 id=\"자취\">자취</h3>\n<p>직장을 옮기니 집과 직장 사이의 거리가 더 멀어져 결국 자취를 하게 됐다. 수도권 집값 너무 비싸서 볼 때마다 아깝다는 생각이 들지만, 그래도 어쩔 수 없다. 집값도 비싸면서 이상한 집은 얼마나 많은지... 그래도 자취를 하니 직장까지 가기가 너무 편해서 만족스럽다. 특히 자취를 한 번도 안 했다가 이제서야 진정한 프라이버시를 얻게 된 점이 너무 좋다.</p>\n<h2 id=\"현재-근황\">현재 근황</h2>\n<h3 id=\"개인서버\">개인서버</h3>\n<p>지인으로부터 안 쓰는 데스크톱 본체를 얻게 됐다. 이 본체에 <a href=\"https://www.proxmox.com\">Proxmox</a>를 설치해 개인 서버를 구축했다. 이제 NAS를 설치하려고 이것저것 알아보고 있는데 <a href=\"https://www.truenas.com\">TrueNAS</a>는 제대로 쓰려면 하드웨어 패스쓰루를 해야 한다고 해서 내키지 않고, <a href=\"https://www.openmediavault.org/\">openmediavault</a>는 웹 파일 브라우저 UI가 뭔가 마음이 들지 않아서... 그냥 내가 직접 만들까도 생각하고 있다.</p>\n<h3 id=\"tor-릴레이\">Tor 릴레이</h3>\n<p>개인적으로 고대역폭 Tor 릴레이를 구축해보고 싶다. 그래서 <a href=\"https://www.kinx.net\">KINX</a>에 관련 문의를 해봤는데 추후 견적이 어떻게 나오는가에 따라서 안 할 수도 있다.</p>\n<h3 id=\"프로젝트-나무위키-이야기\">프로젝트 &quot;나무위키 이야기&quot;</h3>\n<p>나무위키의 초반기 역사에 대한 책을 쓰고 싶어서 올해 중반쯤에 프로젝트를 결성했는데, 바쁘게 살다 보니 그 새 까먹어서 이제서야 본격적인 시동을 걸게 됐다. 사람들이 슬슬 기억이 안 나기 시작해서 원할하게 될지는 모르겠지만, 어쨌든 잘 이루어졌으면 좋겠다.</p>\n<h3 id=\"쓰지-못한-글들\">쓰지 못한 글들</h3>\n<p>아직 못 쓴 글들은 다음과 같다. 학생자치후기는 특성상 검열이 많이 될 수 있어서 재미가 없을 수도 있다.</p>\n<ul>\n<li>학사일정 ICS 서비스 개발기 (下)</li>\n<li>바이드럼 관련 글들</li>\n<li>학생자치후기</li>\n</ul>\n<p>아랫글들은 잠깐 쓰다 말았는데 완성 안 하고 그냥 삭제할 수도 있다.</p>\n<ul>\n<li>리눅스에서 zapret 써서 인터넷 검열 우회하는 방법</li>\n<li>유닉스 도메인 소켓 관련 커널 코드 분석</li>\n</ul>\n<p>아랫글은 쓰다 말았는데 타이밍을 놓쳐서 그냥 삭제할 계획이다.</p>\n<ul>\n<li>졸업 후기</li>\n</ul>\n<h1 id=\"마무리\">마무리</h1>\n<p>이제 연말이 얼마 남지 않았다. 다음 해에는 다들 즐거운 일만이 있기를!</p>\n"}},"__N_SSG":true}